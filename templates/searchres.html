<!DOCTYPE html>
<html>
  <head>
    <title>Banana Manga Reader: Search Results</title>

    <link
      rel="stylesheet"
      type="text/css"
      href="{{ url_for('static', filename='style/navstyle2.css') }}"
    />

    <style>
      /* Global box model fix */
      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }

      body {
        font-family: Georgia, Garamond, Serif;
        background: #f7f7f7;
        color: #000;
        margin: 0;
        padding: 0;
      }

      h3 {
        margin: 12px;
      }

      /* ================= SEARCH CARD ================= */

      .search-card {
        max-width: 420px;
        margin: 60px auto 30px auto;
        background: #ffffff;
        border: 1.5px solid #bbb;
        border-radius: 18px;
        padding: 26px;
        text-align: center;
      }

      .search-title {
        font-size: 22px;
        font-weight: bold;
        margin-bottom: 20px;
      }

      .search-card input[type="text"] {
        width: 100%;
        height: 44px;
        font-size: 18px;
        padding: 10px 12px;
        border: 2px solid #999;
        border-radius: 12px;
        margin-bottom: 18px;
      }

      .search-card input[type="text"]::placeholder {
        color: #666;
      }

      .search-card input[type="submit"] {
        width: 100%;
        font-size: 18px;
        padding: 12px;
        border: 2px solid #111;
        background: #111;
        color: #fff;
        border-radius: 12px;
      }

      .search-card input[type="submit"]:active {
        background: #333;
      }

      /* ================= RESULTS GRID ================= */

      .results-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
        gap: 14px;
        padding: 12px;
      }

      /* ================= MANGA CARD ================= */

      .manga-card {
        display: flex;
        background: #ffffff;
        border: 2px solid #ccc;
        border-radius: 14px;
        padding: 10px;
        text-decoration: none;
        color: inherit;
      }

      .manga-card:active {
        background: #eaeaea;
      }

      .manga-cover {
        width: 120px;
        height: auto;
        border-radius: 8px;
        margin-right: 12px;
        flex-shrink: 0;
      }

      .manga-info {
        display: flex;
        flex-direction: column;
        justify-content: center;
      }

      .manga-title {
        font-size: 20px;
        font-weight: bold;
        margin-bottom: 6px;
        line-height: 1.2;
      }

      .manga-meta {
        font-size: 15px;
        line-height: 1.4;
      }

      .label {
        font-weight: bold;
      }
    </style>
  </head>

  <body>
    <!-- Hamburger menu -->
    <div class="hamburger-menu">
      <input id="menu__toggle" type="checkbox" />
      <label class="menu__btn" for="menu__toggle"><span></span></label>
      <ul class="menu__box">
        <li><a class="menu__item" href="/">Home</a></li>
        <li><a class="menu__item" href="/search">Search Manga</a></li>
        <li><a class="menu__item" href="/favorites">Favorites</a></li>
        <li><a class="menu__item" href="/library">Library</a></li>
        <li><a class="menu__item" href="/nav">Navigation</a></li>
        <li><a class="menu__item" href="/about">About</a></li>
        <li><a class="menu__item" href="/shutdown">Close app</a></li>
      </ul>
    </div>

    <!-- Search -->
    <div class="search-card">
      <div class="search-title">Search Manga</div>
      <form action="#" method="POST" id="searchForm">
        <input type="text" name="srchstr" placeholder="e.g. demon slayer" />
        <input type="submit" value="Search" />
      </form>
    </div>

    <h3>Results</h3>

    <!-- Results -->
    <div class="results-grid">
      {% if n_manga > 0 %} {% for key in res %}
      <a class="manga-card" href="/manga_result/choice/{{ key }}">
        {% if res[key].get('img') %}
        <img class="manga-cover" src="{{ res[key]['img'] }}" />
        {% else %}
        <div class="manga-cover">No image</div>
        {% endif %}

        <div class="manga-info">
          <div class="manga-title">{{ res[key]['title'] }}</div>
          <div class="manga-meta">
            <span class="label">Author:</span>
            {{ res[key].get('author', 'Unknown') }}<br />
            <span class="label">Latest Chapter:</span>
            {{ res[key].get('last_ch', 'â€”') }}
          </div>
        </div>
      </a>
      {% endfor %} {% endif %}
    </div>
  </body>
</html>
